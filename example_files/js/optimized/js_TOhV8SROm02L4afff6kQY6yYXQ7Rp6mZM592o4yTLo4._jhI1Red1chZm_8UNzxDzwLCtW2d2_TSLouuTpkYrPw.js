/* Source and licensing information for the line(s) below can be found at http://alumni.docker.localhost:8000/modules/contrib/geolocation/modules/geolocation_google_maps/js/geolocation-google-maps-api.js. */
(function($,Drupal){'use strict';Drupal.geolocation.google=Drupal.geolocation.google||{}
function GeolocationGoogleMap(mapSettings){this.type='google_maps';Drupal.geolocation.GeolocationMapBase.call(this,mapSettings);var defaultGoogleSettings={panControl:false,scaleControl:false,rotateControl:false,mapTypeId:'roadmap',zoom:2,maxZoom:20,minZoom:0,style:[],gestureHandling:'auto'};this.settings.google_map_settings=$.extend(defaultGoogleSettings,this.settings.google_map_settings);this.container.css({height:this.settings.google_map_settings.height,width:this.settings.google_map_settings.width});this.addInitializedCallback(function(map){var center=new google.maps.LatLng(map.lat,map.lng);map.googleMap=new google.maps.Map(map.container[0],{zoom:map.settings.google_map_settings.zoom,maxZoom:map.settings.google_map_settings.maxZoom,minZoom:map.settings.google_map_settings.minZoom,center:center,mapTypeId:google.maps.MapTypeId[map.settings.google_map_settings.type],mapTypeControl:false,zoomControl:false,streetViewControl:false,rotateControl:false,fullscreenControl:false,scaleControl:map.settings.google_map_settings.scaleControl,panControl:map.settings.google_map_settings.panControl,gestureHandling:map.settings.google_map_settings.gestureHandling,styles:(typeof map.settings.google_map_settings.style!=='undefined')?map.settings.google_map_settings.style:null});var singleClick,timer;google.maps.event.addListener(map.googleMap,'click',function(e){singleClick=setTimeout(function(){map.clickCallback({lat:e.latLng.lat(),lng:e.latLng.lng()})},500);timer=Date.now()});google.maps.event.addListener(map.googleMap,'dblclick',function(e){clearTimeout(singleClick);map.doubleClickCallback({lat:e.latLng.lat(),lng:e.latLng.lng()})});google.maps.event.addListener(map.googleMap,'rightclick',function(e){map.contextClickCallback({lat:e.latLng.lat(),lng:e.latLng.lng()})});google.maps.event.addListenerOnce(map.googleMap,'tilesloaded',function(){map.populatedCallback()})});if(this.initialized){this.initializedCallback()}else{var that=this;Drupal.geolocation.google.addLoadedCallback(function(){that.initializedCallback()});Drupal.geolocation.google.load()}};GeolocationGoogleMap.prototype=Object.create(Drupal.geolocation.GeolocationMapBase.prototype);GeolocationGoogleMap.prototype.constructor=GeolocationGoogleMap;GeolocationGoogleMap.prototype.setMapMarker=function(markerSettings){if(typeof markerSettings.setMarker!=='undefined')if(markerSettings.setMarker===false)return;markerSettings.position=new google.maps.LatLng(Number(markerSettings.position.lat),Number(markerSettings.position.lng));markerSettings.map=this.googleMap;if(typeof this.settings.google_map_settings.marker_icon_path==='string')if(this.settings.google_map_settings.marker_icon_path&&typeof markerSettings.icon==='undefined')markerSettings.icon=this.settings.google_map_settings.marker_icon_path;var currentMarker=new google.maps.Marker(markerSettings);Drupal.geolocation.GeolocationMapBase.prototype.setMapMarker.call(this,currentMarker);return currentMarker};GeolocationGoogleMap.prototype.removeMapMarker=function(marker){if(typeof marker==='undefined')return;Drupal.geolocation.GeolocationMapBase.prototype.removeMapMarker.call(this,marker);marker.setMap(null)};GeolocationGoogleMap.prototype.addShape=function(shapeSettings){if(typeof shapeSettings==='undefined')return;var shape;switch(shapeSettings.shape){case'line':shape=new google.maps.Polyline({path:shapeSettings.coordinates,strokeColor:shapeSettings.strokeColor,strokeOpacity:shapeSettings.strokeOpacity,strokeWeight:shapeSettings.strokeWidth});break;case'polygon':shape=new google.maps.Polygon({paths:shapeSettings.coordinates,strokeColor:shapeSettings.strokeColor,strokeOpacity:shapeSettings.strokeOpacity,strokeWeight:shapeSettings.strokeWidth,fillColor:shapeSettings.fillColor,fillOpacity:shapeSettings.fillOpacity});break};if(typeof shapeSettings.title!=="undefined"&&shapeSettings.title.length){var infoWindow=new google.maps.InfoWindow(),that=this;google.maps.event.addListener(shape,'mouseover',function(e){infoWindow.setPosition(e.latLng);infoWindow.setContent(shapeSettings.title);infoWindow.open(that.googleMap)});google.maps.event.addListener(shape,'mouseout',function(){infoWindow.close()})};shape.setMap(this.googleMap);Drupal.geolocation.GeolocationMapBase.prototype.addShape.call(this,shape);return shape};GeolocationGoogleMap.prototype.removeShape=function(shape){if(typeof shape==='undefined')return;Drupal.geolocation.GeolocationMapBase.prototype.removeShape.call(this,shape);shape.setMap(null)};GeolocationGoogleMap.prototype.getMarkerBoundaries=function(locations){locations=locations||this.mapMarkers;if(locations.length===0)return false;var bounds=new google.maps.LatLngBounds();$.each(locations,function(index,item){bounds.extend(item.getPosition())});return bounds};GeolocationGoogleMap.prototype.fitBoundaries=function(boundaries,identifier){boundaries=this.denormalizeBoundaries(boundaries);if(!boundaries)return;var currentBounds=this.googleMap.getBounds();if(!currentBounds||!currentBounds.equals(boundaries)){this.googleMap.fitBounds(boundaries);Drupal.geolocation.GeolocationMapBase.prototype.fitBoundaries.call(this,boundaries,identifier)}};GeolocationGoogleMap.prototype.getZoom=function(){var that=this;return new Promise(function(resolve,reject){google.maps.event.addListenerOnce(that.googleMap,"idle",function(){resolve(that.googleMap.getZoom())})})};GeolocationGoogleMap.prototype.setZoom=function(zoom,defer){if(typeof zoom==='undefined')zoom=this.settings.google_map_settings.zoom;zoom=parseInt(zoom);this.googleMap.setZoom(zoom);var that=this;if(defer)google.maps.event.addListenerOnce(this.googleMap,"idle",function(){that.googleMap.setZoom(zoom)})};GeolocationGoogleMap.prototype.getCenter=function(){var center=this.googleMap.getCenter();return{lat:center.lat(),lng:center.lng()}};GeolocationGoogleMap.prototype.setCenterByCoordinates=function(coordinates,accuracy,identifier){Drupal.geolocation.GeolocationMapBase.prototype.setCenterByCoordinates.call(this,coordinates,accuracy,identifier);if(typeof accuracy==='undefined'){this.googleMap.setCenter(coordinates);return};var circle=this.addAccuracyIndicatorCircle(coordinates,accuracy);this.googleMap.fitBounds(circle.getBounds());setInterval(fadeCityCircles,200)
function fadeCityCircles(){var fillOpacity=circle.get('fillOpacity');fillOpacity-=0.01;var strokeOpacity=circle.get('strokeOpacity');strokeOpacity-=0.02;if(strokeOpacity>0&&fillOpacity>0){circle.setOptions({fillOpacity:fillOpacity,strokeOpacity:strokeOpacity})}else circle.setMap(null)}};GeolocationGoogleMap.prototype.normalizeBoundaries=function(boundaries){if(boundaries instanceof google.maps.LatLngBounds){var northEast=boundaries.getNorthEast(),southWest=boundaries.getSouthWest();return{north:northEast.lat(),east:northEast.lng(),south:southWest.lat(),west:southWest.lng()}};return false};GeolocationGoogleMap.prototype.denormalizeBoundaries=function(boundaries){if(typeof boundaries==='undefined')return false;if(boundaries instanceof google.maps.LatLngBounds)return boundaries;if(Drupal.geolocation.GeolocationMapBase.prototype.boundariesNormalized.call(this,boundaries)){return new google.maps.LatLngBounds({lat:boundaries.south,lng:boundaries.west},{lat:boundaries.north,lng:boundaries.east})}else{boundaries=Drupal.geolocation.GeolocationMapBase.prototype.normalizeBoundaries.call(this,boundaries);if(boundaries)return new google.maps.LatLngBounds({lat:boundaries.south,lng:boundaries.west},{lat:boundaries.north,lng:boundaries.east})};return false};GeolocationGoogleMap.prototype.addControl=function(element){element=$(element);var position=google.maps.ControlPosition.TOP_LEFT;if(typeof element.data('googleMapControlPosition')!=='undefined'){var customPosition=element.data('googleMapControlPosition');if(typeof google.maps.ControlPosition[customPosition]!=='undefined')position=google.maps.ControlPosition[customPosition]};var controlAlreadyAdded=false,controlIndex=0;this.googleMap.controls[position].forEach(function(controlElement,index){var control=$(controlElement);if(element[0].getAttribute("class")===control[0].getAttribute("class")){controlAlreadyAdded=true;controlIndex=index}});if(!controlAlreadyAdded){element.show();this.googleMap.controls[position].push(element[0]);return element}else{element.remove();return this.googleMap.controls[position].getAt(controlIndex)}};GeolocationGoogleMap.prototype.removeControls=function(){$.each(this.googleMap.controls,function(index,item){if(typeof item==='undefined')return;if(typeof item.clear==='function')item.clear()})};Drupal.geolocation.GeolocationGoogleMap=GeolocationGoogleMap;Drupal.geolocation.addMapProvider('google_maps','GeolocationGoogleMap');GeolocationGoogleMap.prototype.addAccuracyIndicatorCircle=function(location,accuracy){return new google.maps.Circle({center:location,radius:accuracy,map:this.googleMap,fillColor:'#4285F4',fillOpacity:0.15,strokeColor:'#4285F4',strokeOpacity:0.3,strokeWeight:1,clickable:false})};Drupal.geolocation.google.addLoadedCallback=function(callback){Drupal.geolocation.google.loadedCallbacks=Drupal.geolocation.google.loadedCallbacks||[];Drupal.geolocation.google.loadedCallbacks.push(callback)};Drupal.geolocation.google.load=function(){if(typeof google==='undefined'||typeof google.maps==='undefined'){console.error('Geolocation - GoogleMaps could not be initialized.');return};$.each(Drupal.geolocation.google.loadedCallbacks,function(index,callback){callback()});Drupal.geolocation.google.loadedCallbacks=[]}})(jQuery,Drupal)
/* Source and licensing information for the above line(s) can be found at http://alumni.docker.localhost:8000/modules/contrib/geolocation/modules/geolocation_google_maps/js/geolocation-google-maps-api.js. */