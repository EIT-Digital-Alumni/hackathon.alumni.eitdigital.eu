/* Source and licensing information for the line(s) below can be found at http://alumni.docker.localhost:8000/modules/contrib/geofield/js/geolocation.js. */
(function(geolocation,$){if(geolocation)return;var cache;geolocation=window.navigator.geolocation={};geolocation.getCurrentPosition=function(callback){if(cache)callback(cache);$.getScript('//www.google.com/jsapi',function(){cache={coords:{latitude:google.loader.ClientLocation.latitude,longitude:google.loader.ClientLocation.longitude}};callback(cache)})};geolocation.watchPosition=geolocation.getCurrentPosition})(navigator.geolocation,jQuery);(function($){Drupal.behaviors.geofieldGeolocation={attach:function(context,settings){function updateLocation(position){$fields.find('.auto-geocode .geofield-lat').val(position.coords.latitude);$fields.find('.auto-geocode .geofield-lon').val(position.coords.longitude)}
function getClientOrigin(position){var lat=position.coords.latitude.toFixed(6),lon=position.coords.longitude.toFixed(6);latitudeInput.val(lat);longitudeInput.val(lon);latitudeSpan.text(lat);longitudeSpan.text(lon);return false};if(!$(context).find("#edit-instance").length){var $fields=$(context);if($fields.find('.auto-geocode .geofield-lat').val()===''&&$fields.find('.auto-geocode .geofield-lon').val()==='')if(navigator.geolocation){navigator.geolocation.getCurrentPosition(updateLocation)}else console.log('Geolocation is not supported by this browser.')};$('input[name="geofield-html5-geocode-button"]').once('geofield_geolocation').click(function(e){e.preventDefault();$fields=$(this).parents('.auto-geocode').parent();if(navigator.geolocation){navigator.geolocation.getCurrentPosition(updateLocation)}else console.log('Geolocation is not supported by this browser.')});var latitudeInput,longitudeInput,latitudeSpan,longitudeSpan='';$('.proximity-origin-client').once('geofield_geolocation').each(function(e){latitudeInput=$(this).find('.geofield-lat').first();longitudeInput=$(this).find('.geofield-lon').first();latitudeSpan=$(this).find('.geofield-lat-summary').first();longitudeSpan=$(this).find('.geofield-lon-summary').first();if(navigator.geolocation){navigator.geolocation.getCurrentPosition(getClientOrigin)}else console.log('Geolocation is not supported by this browser.')})}}})(jQuery)
/* Source and licensing information for the above line(s) can be found at http://alumni.docker.localhost:8000/modules/contrib/geofield/js/geolocation.js. */