/* Source and licensing information for the line(s) below can be found at http://hackathondigitalumni.docker.localhost:8000/modules/contrib/webform/js/webform.ajax.js. */
(function($,Drupal,drupalSettings){'use strict';Drupal.webform=Drupal.webform||{};Drupal.webform.ajax=Drupal.webform.ajax||{};Drupal.webform.ajax.scrollTopOffset=Drupal.webform.ajax.scrollTopOffset||($('#toolbar-administration').length?140:10);Drupal.behaviors.webformAjaxLink={attach:function(context){$('.webform-ajax-link',context).once('webform-ajax-link').each(function(){var element_settings={};element_settings.progress={type:'fullscreen'};var href=$(this).attr('href');if(href){element_settings.url=href;element_settings.event='click'};element_settings.dialogType=$(this).data('dialog-type');element_settings.dialogRenderer=$(this).data('dialog-renderer');element_settings.dialog=$(this).data('dialog-options');element_settings.base=$(this).attr('id');element_settings.element=this;Drupal.ajax(element_settings);if(element_settings.dialogRenderer==='off_canvas')$(this).on('click',function(){$('.ui-dialog.webform-ui-dialog:visible').find('.ui-dialog-content').dialog('close')})})}};Drupal.behaviors.webformAjaxHash={attach:function(context){$('[data-hash]',context).once('webform-ajax-hash').each(function(){var hash=$(this).data('hash');if(hash)$(this).on('click',function(){location.hash=$(this).data('hash')})})}};Drupal.behaviors.webformConfirmationBackAjax={attach:function(context){$('.js-webform-confirmation-back-link-ajax',context).once('webform-confirmation-back-ajax').click(function(event){var $form=$(this).parents('form');$form.find('.js-webform-confirmation-back-submit-ajax').click();var $progress_indicator=$form.find('.ajax-progress');if($progress_indicator)$(this).after($progress_indicator);event.preventDefault();event.stopPropagation()})}};var updateKey,addElement;Drupal.AjaxCommands.prototype.webformInsert=function(ajax,response,status){this.insert(ajax,response,status);if(addElement){var addSelector=(addElement==='_root_')?'#webform-ui-add-element':'[data-drupal-selector="edit-webform-ui-elements-'+addElement+'-add"]';$(addSelector).click()};if(!addElement&&updateKey){var $element=$('tr[data-webform-key="'+updateKey+'"]');$element.addClass('color-success');setTimeout(function(){$element.removeClass('color-success')},3e3);$element.find(':tabbable:not(.tabledrag-handle)').eq(0).focus();if(!isScrolledIntoView($element))$('html, body').animate({scrollTop:$element.offset().top-Drupal.webform.ajax.scrollTopOffset},500)}else $('#main-content').focus();var $wrapper=$(response.selector);if($wrapper.parents('.ui-dialog').length===0){var $messages=$wrapper.find('.messages');if(addElement){$messages.remove()}else if($messages.length){var $floatingMessage=$('#webform-ajax-messages');if($floatingMessage.length===0){$floatingMessage=$('<div id="webform-ajax-messages" class="webform-ajax-messages"></div>');$('body').append($floatingMessage)};if($floatingMessage.is(':animated'))$floatingMessage.stop(true,true);$floatingMessage.html($messages).show().delay(3e3).fadeOut(1e3)}};updateKey=null;addElement=null};Drupal.AjaxCommands.prototype.webformScrollTop=function(ajax,response){var offset=$(response.selector).offset(),scrollTarget=response.selector;while($(scrollTarget).scrollTop()===0&&$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(response.target==='page'&&$(scrollTarget).length&&$(scrollTarget)[0].tagName==='HTML'){var rect=$(scrollTarget)[0].getBoundingClientRect();if(!(rect.top>=0&&rect.left>=0&&rect.bottom<=$(window).height()&&rect.right<=$(window).width()))$(scrollTarget).animate({scrollTop:0},500)}else if(offset.top-Drupal.webform.ajax.scrollTopOffset<$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:(offset.top-Drupal.webform.ajax.scrollTopOffset)},500);var $form=$(response.selector+'-content').find('form');if(!$form.hasClass('js-webform-autofocus'))$(response.selector+'-content').focus()};Drupal.AjaxCommands.prototype.webformRefresh=function(ajax,response,status){var a=document.createElement('a');a.href=response.url;var forceReload=(response.url.match(/\?reload=([^&]+)($|&)/))?RegExp.$1:null;if(forceReload){response.url=response.url.replace(/\?reload=([^&]+)($|&)/,'');this.redirect(ajax,response,status);return};if(a.pathname===window.location.pathname&&$('.webform-ajax-refresh').length){updateKey=(response.url.match(/[?|&]update=([^&]+)($|&)/))?RegExp.$1:null;addElement=(response.url.match(/[?|&]add_element=([^&]+)($|&)/))?RegExp.$1:null;$('.webform-ajax-refresh').click()}else{if(Drupal.behaviors.webformUnsaved)Drupal.behaviors.webformUnsaved.clear();if(drupalSettings.webform_share&&drupalSettings.webform_share.page){window.top.location=response.url}else this.redirect(ajax,response,status)}};Drupal.AjaxCommands.prototype.webformCloseDialog=function(ajax,response,status){if($('#drupal-off-canvas').length){$('#drupal-off-canvas').remove();$('body').removeClass('js-tray-open');$(document).off('.off-canvas');$(window).off('.off-canvas');var edge=document.documentElement.dir==='rtl'?'left':'right',$mainCanvasWrapper=$('[data-off-canvas-main-canvas]');$mainCanvasWrapper.css('padding-'+edge,0);$(window).trigger('resize.tabs')};if($(response.selector).hasClass('ui-dialog-content'))this.closeDialog(ajax,response,status)};Drupal.AjaxCommands.prototype.webformConfirmReload=function(ajax,response){if(window.confirm(response.message))window.location.reload(true)}
function isScrolledIntoView(element){var docViewTop=$(window).scrollTop(),docViewBottom=docViewTop+$(window).height(),elemTop=$(element).offset().top,elemBottom=elemTop+$(element).height();return((elemBottom<=docViewBottom)&&(elemTop>=docViewTop))}})(jQuery,Drupal,drupalSettings)
/* Source and licensing information for the above line(s) can be found at http://hackathondigitalumni.docker.localhost:8000/modules/contrib/webform/js/webform.ajax.js. */